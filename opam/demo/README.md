# Experimental Benchmarking
This folder contains the code to automate the execution of the algorithm from static slicing to creation of the final output file to be used with cbmc.

## File/Folder Descriptions
- create\_cbmc\_ready.sh: Original placeholder code for creation of the output files. No longer relevant now.
- list\_vars.ml: An OCAML program using the CIL module that can list all the parameters and the local variables used in a function.
- instrument\_seu.ml: An OCAML program using the CIL module to insert "simulate\_seu()" statements in a program. Inserts the statements, with respect to a variable, before every usage in the program.
- manual\_run\_crv\_check.sh: A bash script to automate the process of creating the <func>\_prime function and using it. It does the following:
    1. Reads the source file path (absolute path) from the stdin and creates an output directory with the same path. (ex: user input of "/home/opam/demo/problems/cs1\_org.c" results in creation of "/home/opam/demo/problems/cs1\_org/" directory). This output directory serves as the main folder to hold all the intermediate and output files generated by the algorithm.
    2. Reads the entry function (with cs1\_org.c, it's the function named 'p') and the slice variable (with cs1\_org.c, it's the return variable named 'output') i.e., (the variable with respect to which the static slicing is to be done using FRAMA-C) from the stdin. Then, it switches to the OPAM Switch named 'frama-switch' so that it can use the frama-c tool and creates a sliced file in the output directory itself with the name having an extension of "\_frama\_sliced.c"
    3. Changes to the OPAM Switch 'cil-switch' to use the CIL programs.
    4. Creates an executable from the list\_vars.ml file, named 'list\_vars' and uses it with the given source file path and the entry function (from step 2) to create a .txt file named 'uniq\_vars.txt' in the output directory itself, alongside the sliced code.
    5. Creates an executable from the instrument\_seu.ml file, named 'instrument\_seu'. Now, it iterates on each of the unique variables doing the following:
        a. Creates a directory with the name as the number that the current variable name maps to (refer to uniq\_vars.txt file)
        b. Within the directory, creates the following files: "\_instru.c" (obtained from using the instrument\_seu executable), "\_instru\_clean.c" (obtained by using gcc -E -P on the "\_instru.c" file and rewrites the function name by appending "\_prime" to it), and a "\_cbmc\_start.c" file which is the original source file with the "\_instru\_clean.c" appended to it.
        c. In the "\_cbmc\_ready.c" file, inserts the two "#include" statements for the "simulate\_seu.h", "queue.h" files. Then, it inserts the Queue initialization code snippet into the start of the main function.
    6. 
